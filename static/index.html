<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Ships</title>
  <meta name="description" content="Ships">
  <meta name="author" content="Jean-Louis Fuchs">

  <link rel="stylesheet" href="/static/styles.css">

<script language="javascript" type="text/javascript">
function exec_command()
{
	return false;
}

function send_msg(msg)
{
	websocket.send(JSON.stringify(msg));
}

function connect_websocket()
{
	websocket = new WebSocket("ws:///main");
	websocket.onopen = function(evt)
	{
		send_msg({"type": "ping"})
	};
	websocket.onclose = function(evt)
	{
	};
	websocket.onmessage = function(evt)
	{
		var msg = JSON.parse(evt.data);
		if(msg.type == 'alert')
		{
			alert(msg.text);
		}
	};
	websocket.onerror = function(evt)
	{
	};
}
function init()
{
	connect_websocket();
}
</script>
</head>

<body onload="init();">
<form action="" name="form_command" onsubmit="return exec_command();">
  Command:<input type="text" name="input_command">
</form>
</body>
</html>
